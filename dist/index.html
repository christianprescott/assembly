<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Assembly</title>
    <style>
      html, body {
        margin: 0;
        height: 100%;
        display: flex;
        flex-direction: column;
      }
      #title {
        margin: 1rem;
      }
      #container {
        min-height: 200px;
        flex: 1;
      }
    </style>
  </head>
  <body>
    <div id="title">
      <h1>Demo</h1>
      <table>
        <tr>
          <th>Control</th>
          <th>Mouse</th>
          <th>Touch</th>
        </tr>
        <tr>
          <td>Move component</td>
          <td>left click + drag</td>
          <td>one finger drag</td>
        </tr>
        <tr>
          <td>Move component in/out</td>
          <td>shift + left click + drag</td>
          <td></td>
        </tr>
        <tr>
          <td>Rotate component</td>
          <td>ctrl + left click + drag</td>
          <td></td>
        </tr>
        <tr>
          <td>Rotate camera</td>
          <td>right click + drag</td>
          <td>two finger drag</td>
        </tr>
        <tr>
          <td>Zoom camera</td>
          <td>scroll</td>
          <td></td>
        </tr>
      </table>
      <div>
        <label for="assembly">Assembly</label>
        <select id="assembly">
          <option value="bricks">Bricks</option>
          <option value="computer">Computer</option>
        </select>
      </div>
      <div>
        <button id="fs">Full Screen</button>
      </div>
    </div>
    <div id="container"></div>
    <script src="bundle.js"></script>
    <script>
      const container = document.getElementById('container')
      const app = new assembly.App(container)
      app.start()

      function loadScene(scene) {
        const objRequest = new XMLHttpRequest()
        objRequest.open('GET', `examples/${scene}.obj`)
        const configRequest = new XMLHttpRequest()
        configRequest.open('GET', `examples/${scene}.json`)
        configRequest.responseType = 'json'
        configRequest.onload = function () {
          app.load(assembly.Assembly.load(objRequest.response, configRequest.response))
        }
        objRequest.onload = function () {
          configRequest.send()
        }
        objRequest.send()
      }

      // Load the scene
      const scene = document.getElementById('assembly').value
      loadScene(scene)

      document.getElementById('assembly').addEventListener(
        'change',
        function (e) { loadScene(e.target.value) }
      )
      document.getElementById('fs').addEventListener(
        'click',
        function () { app.fullscreen() }
      )
    </script>
  </body>
</html>
